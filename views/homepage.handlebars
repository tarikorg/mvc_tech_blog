<h1 class="text-3xl font-bold mb-4">Homepage</h1>

{{#each post}}
<div class="bg-gray-100 p-4 my-4">
    <h2 class="open-title text-xl font-bold mb-2">{{title}}</h2>
     <div class="hidden post-details">
    <p class="text-gray-700 mb-2">{{content}}</p>
    <p class="text-gray-500">Created by: {{user.username}}</p>
    <p class="text-gray-500">Date: {{createdAt}}</p>

    {{!-- Display existing comments --}}
    <h3 class="text-lg font-semibold mb-2">Comments:</h3>
    {{#each comments}}
    <div class="bg-gray-800 text-white rounded-md p-2 mb-2">
        <p class="text-white-600 mb-2">{{this.content}}</p>
        <p class="text-gray-500">comment written by: {{this.user.username}}</p>
    </div>

    {{/each}}

    {{!-- Form for adding new comment --}}
    {{#if ../isLogged}}
    <form action="/comment/{{this.id}}" method="POST" class="mb-2">
        <input type="text" name="content" placeholder="Add a comment..."
            class="border border-gray-300 rounded-md p-2 w-full" required>
        <button type="submit" class="text-white bg-blue-500 px-4 py-2 rounded-md mt-2">Add Comment</button>
    </form>
     {{/if}}
</div>
</div>
{{/each}}

<script>
  // toggle display for titles
  document.querySelectorAll('.open-title').forEach(function(title) {
    title.addEventListener('click', function() {
      title.nextElementSibling.classList.toggle('hidden');
    });
  });
</script>